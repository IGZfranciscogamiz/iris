var iris=new function(){function O(){if(!P)return iris.E("You must set the welcome screen using iris.screen.WelcomeScreen()"),!1;if(I)return I=!1;var a=t.split("/"),b=document.location.hash.split("/"),c="",d="",e,u=!1;if(""!=t)for(var g=0,v=a.length;g<v;g++)if(""!=a[g]&&(c+=a[g]+"/",e=J(c),h.hasOwnProperty(e)&&!1===h[e].CanSleep()))return I=!0,document.location.hash=t,!1;c="";if(a.length>b.length){g=0;for(v=a.length;g<v;g++)if(c+=a[g]+"/",b[g]&&(d+=b[g]+"/"),u||d!=c)u=!0,e=J(c),h[e].__Sleep__(),h[e].Hide()}d=
c="";u=!1;g=0;for(v=b.length;g<v;g++)if(d+=b[g]+"/",a[g]&&(c+=a[g]+"/"),u||d!=c){var u=!0,f=e=J(d),i=b[g];e={};for(var j=/(\w*)=([\w%]*)/g;matches=j.exec(i);)e[matches[1]]=decodeURI(matches[2]);if(K.hasOwnProperty(f)){if(!h.hasOwnProperty(f)){i=f;j=Q[i];w(j);var k=new E;k.prototype=new x[j](k);k.__Id__=i;k.__UIComponents__=[];k.__$Container__=K[i];k.__FileJs__=j;k.Create();k.Hide();h[i]=k}f=h[f];i=f.$Get().parent().data("screen_context");y.hasOwnProperty(i)&&(j=y[i],j.__Sleep__(),j.Hide());f.__Awake__(e?
e:{});f.Show();y[i]=f}else p("Screen '"+f+"' must be registered with self.AddScreen() before go to")}t=d.replace(/\/$/,"")}function J(a){return a.replace(/\?[^\/]*/,"").replace(/\/$/,"")}function w(a){if(!q.hasOwnProperty(a)){q[a]=!0;var b=0===a.indexOf("http")?a:R()+a;z("[iris.ui.Include]",b);if(-1<a.lastIndexOf(".css")){var c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;S.appendChild(c)}else{F=a;var d=-1<a.lastIndexOf(".html");T(b,d?"html":"text",function(b){if(d){var c=
q,g=b.match(/@@[A-Za-z_\.]+@@/g);if(g){var f,h=g.length;for(f=0;f<h;f++)b=b.replace(g[f],U(g[f].substring(2,g[f].length-2)))}c[a]=b}else c=document.createElement("script"),c.language="javascript",c.type="text/javascript",c.text=b,S.appendChild(c)},function(a){delete q[b];p(a.status,"Error loading file '"+b+"'")})}}}function z(){r&&G.debug&&window.console.debug(A,arguments)}function p(){r&&G.error&&window.console.error(A,arguments)}function H(a){if(void 0!==a)m=a;else{if(!m){m=l["environment-default"];
for(var b in l.environment)if(-1<document.location.href.indexOf(b)){m=l.environment[b];break}m||(m="pro");A="["+m+"]"}return m}}function T(a,b,c,d){$.ajax({url:a,dataType:b,async:!1,cache:L,success:c,error:d})}function V(a){$.extend(B,a);return B}function W(a){$.extend(C,a);return C}function X(a,b){var c=n[a];if(c)for(var d=0,e=c.length;d<e;d++)if(c[d]===b)return d;return-1}function R(a){void 0!==a?M=a:(a=document.getElementsByTagName("base"),a=0<a.length?a[0].attributes.href.value:"/",M=document.location.protocol+
"//"+document.location.host+a);return M}function Y(a,b){var c;if(-1<b.indexOf(".")){c=b.split(".");var d,e=c.length;for(d=0;d<e;d++)if(void 0!==a)a=a[c[d]];else break;c=a}else c=a[b];return c}function Z(a,b){z("[iris.lang.Load]",a,b);null===f&&(f=a);o.hasOwnProperty(a)||(o[a]={});$.extend(o[a],b)}function U(a){var b;o.hasOwnProperty(f)?(b=Y(o[f],a),void 0===b&&iris.W("Label '"+a+"' not found in Locale '"+f+"'",o[f]),"object"===typeof b&&iris.W("Label '"+a+"' is an object but must be a property in Locale '"+
f+"'",o[f])):iris.W("Locale '"+f+"' not loaded");return b?b:"??"+a+"??"}function aa(a){for(var b={},a=a.get(0).attributes,c,d=0,e=a.length;d<e;d++)c=a[d].name,0==c.indexOf("data-")&&(c=c.substr(5)),b[c]=a[d].value;return b}function ba(a,b){b||(b=ca("dateFormat"));"object"!==typeof a&&(a=new Date(Number(a)));for(var c="",d=0,e=b.length;d<e;d++)c+=ha(b[d],a);return c}function ca(a){if(D.hasOwnProperty(f)){if(D[f].hasOwnProperty(a))return D[f][a];iris.E("Regional setting '"+a+"' not found for locale '"+
f+"'")}else iris.E("Regional for locale '"+f+"' not found")}function s(a){return 10>a?"0"+a:a}function ha(a,b){var c=D[f];switch(a){case "y":return String(b.getFullYear()).substring(2);case "Y":return b.getFullYear();case "m":return c=b.getMonth()+1,s(c);case "n":return b.getMonth()+1;case "M":return c[monthNames][b.getMonth()].substring(0,3);case "b":return c[monthNames][b.getMonth()].substring(0,3).toLowerCase();case "F":return c[monthNames][b.getMonth()];case "d":return c=b.getDate(),s(c);case "D":return c[dayNames][b.getDay()].substring(0,
3);case "l":return c[dayNames][b.getDay()];case "s":return c=b.getSeconds(),s(c);case "i":return c=b.getMinutes(),s(c);case "H":return c=b.getHours(),s(c);case "h":return c=b.getHours(),s(0==c%12?12:c%12);case "a":return 12<b.getHours()?"p.m.":"a.m.";case "A":return 12<b.getHours()?"PM":"AM";case "U":return Math.floor(0.001*b.getTime());default:return a}}function da(){this.__Setting__=null;this.Settings=function(a){$.extend(this.__Setting__,a)};this.Setting=function(a,b){if(void 0===b)return this.__Setting__.hasOwnProperty(a)||
iris.W("The setting ",a," is not in ",this.__Setting__,this),this.__Setting__[a];this.__Setting__[a]=b}}function N(){this.TEMPLATE_APPEND="append";this.TEMPLATE_REPLACE="replace";this.__FileTmpl__=this.__FileJs__=this.__IsSleeping__=this.__$Container__=this.__UIComponents__=this.__Id__=this.__$Tmpl__=null;this.__Sleep__=function(){for(var a=0,b=this.__UIComponents__.length;a<b;a++)this.__UIComponents__[a].__Sleep__();this.__IsSleeping__=!0;this.Sleep()};this.__Awake__=function(a){for(var b=0,c=this.__UIComponents__.length;b<
c;b++)this.__UIComponents__[b].__Awake__();this.__IsSleeping__=!1;this.Awake(a)};this.__Destroy__=function(){this.__IsSleeping__||this.__Sleep__();for(var a=0,b=this.__UIComponents__.length;a<b;a++)this.__UIComponents__[a].__Destroy__();this.__UIComponents__=null;this.Destroy()};this.__Template__=function(a,b,c){this.__FileTmpl__=a;if("undefined"==typeof a)return this.__$Tmpl__=this.__$Container__;iris.Include(a);if(b){for(var d=q[a],e=d,f,g,h,l=/##([0-9A-Za-z_\.]+)(?:\|(date|currency)(?:\(([^\)]+)\))*)?##/g;f=
l.exec(d);){h=Y(b,f[1]);if(void 0!==h){if(g=f[2])switch(g){case "date":h=ba(h,f[3]);break;case "currency":g=ca("currency");var i=Number(h);h=0<=i?g.formatPos:g.formatNeg;for(var j=i%1,i=String(Math.abs(i-j)),j=String(Math.abs(j).toFixed(g.precision)),j=j.substr(2),k=0;k<Math.floor((i.length-(1+k))/3);k++)i=i.substring(0,i.length-(4*k+3))+g.thousand+i.substring(i.length-(4*k+3));h=h.replace("n",i+g.decimal+j);break;default:iris.W("Unknow template format label '"+g+"' in '"+a+"'")}}else iris.W("Template param '"+
f[1]+"' in '"+a+"' not found",b);e=e.replace(f[0],h)}b=e}else b=q[a];this.__$Tmpl__=b=$(b);1<b.size()&&iris.E("Template '"+a+"' must have only one root node");switch(c){case this.TEMPLATE_APPEND:this.__$Container__.append(b);break;case this.TEMPLATE_REPLACE:this.__$Container__.replaceWith(b);break;default:iris.E("Unknown template mode '"+c+"'")}};this.Show=function(){this.__$Tmpl__.show()};this.Hide=function(){this.__$Tmpl__.hide()};this.$Get=function(a){if(null==this.__$Tmpl__)iris.E("You must set a template using self.Template() in '"+
this.__FileJs__+"'");else{if(a){var b="[data-id="+a+"]",c=this.__$Tmpl__.filter(b),d=null;0<c.length?d=c:(b=this.__$Tmpl__.find(b),0<b.size()&&(d=b));if(null==d){iris.E("[data-id="+a+"] not found in '"+this.__FileTmpl__+"' used by '"+this.__FileJs__+"'");return}if(1<d.size()){iris.E("[data-id="+a+"] must be unique in '"+this.__FileTmpl__+"' used by '"+this.__FileJs__+"'");return}return d}return this.__$Tmpl__}};this.InstanceUI=function(a,b,c){a=this.$Get(a);if(1==a.size()){var d=a.data("id");w(b);
var e=new ea;e.__Id__=d;e.__$Container__=a;e.__UIComponents__=[];e.__Setting__={};e.__FileJs__=b;e.prototype=new x[b](e);c=void 0===c?{}:c;b=aa(a);$.extend(e.__Setting__,b,c);e.Create(b,c);return this.__UIComponents__[this.__UIComponents__.length]=e}};this.DestroyUI=function(a){for(var b=0,c=this.__UIComponents__.length;b<c;b++)if(this.__UIComponents__[b]==a){this.__UIComponents__.splice(b,1);a.__Destroy__();a.$Get().remove();break}};this.DestroyAllUIs=function(a){for(var a="string"===typeof a?"[data-id="+
a+"]":a.selector,b,c=0,d=this.__UIComponents__.length;c<d;c++)b=this.__UIComponents__[c],b.__$Container__.selector==a&&(this.__UIComponents__.splice(c--,1),d--,b.__Destroy__(),b.$Get().remove())};this.$Container=function(){return this.__$Container__};this.Create=function(){};this.Awake=function(){};this.CanSleep=function(){return!0};this.Sleep=function(){};this.Destroy=function(){}}function fa(){this.__Components__=null;this.AddAll=function(a){for(var b=0,c=a.length;b<c;b++)this.Add(a[b])};this.Add=
function(a){this.hasOwnProperty("UIAddOn")&&(a.proptotype=new this.UIAddOn(a));this.__Components__[this.__Components__.length]=a};this.Remove=function(a){for(var b,c=0,d=this.__Components__.length;c<d;c++)b=this.__Components__[c],b===a&&this.__Components__.splice(c,1)};this.Get=function(a){return this.__Components__[a]};this.Size=function(){return this.__Components__.length};this.Create=function(){}}function ea(){this.__TemplateMode__=this.TEMPLATE_REPLACE;this.TemplateMode=function(a){this.__TemplateMode__=
a};this.Template=function(a,b){this.__Template__(a,b,this.__TemplateMode__)}}function E(){this.Template=function(a,b){this.__Template__(a,b,this.TEMPLATE_APPEND)};this.AddScreen=function(a,b,c){var d=this.$Get(a);void 0===d.data("screen_context")&&d.data("screen_context",this.__Id__+"|"+a);Q[b]=c;K[b]=d}}var m=null,G={error:!0},A="",h={},Q={},K={},y={},t="",B={},C={},f=null,l={},o={},n={},q={},x={},ga={},M="",F,S=$("head").get(0),L=!0,r,I=!1,P=!1,D={"en-US":{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
monthNames:"January February March April May June July August September October November December".split(" "),dateFormat:"m/d/Y h:i:s",currency:{formatPos:"$ n",formatNeg:"($ n)",decimal:".",thousand:",",precision:2}},"es-ES":{dayNames:"Domingo Lunes Martes Mi\u00e9rcoles Jueves Viernes S\u00e1bado".split(" "),monthNames:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),dateFormat:"d/m/Y H:i:s",currency:{formatPos:"n \u20ac",formatNeg:"-n \u20ac",
decimal:",",thousand:".",precision:2}}};N.prototype=new da;fa.prototype=new da;ea.prototype=new N;E.prototype=new N;this.screen={};this.event={};this.config={};this.ui={};this.net={};this.global={};this.local={};this.lang={};this.util={};this.config.Load=function(a){if(a){$.extend(l,a);V(l.global);a=H();if(l.log){var b=l.log[a].split(","),c;for(c in b)G[$.trim(b[c])]=!0}L=!0;if(l.hasOwnProperty("environments-nocache")){c=l["environments-nocache"].split(",");for(var b=0,d=c.length;b<d;b++)if(c[b]==
a){L=!1;break}}W(l.local)}return l};this.config.Env=H;this.global.Load=V;this.global.Data=function(a,b){if(a&&void 0!==b)B[a]=b;else return a?B[a]:B};this.local.Load=W;this.local.Data=function(a,b){if(a&&void 0!==b)C[a][H()]=b;else return a?C[a][H()]:C};this.lang.Load=Z;this.lang.LoadFrom=function(a,b,c){z("[iris.lang.LoadFrom]",a,b);T(b,"json",function(b){Z(a,b);z("[iris.lang.LoadFrom] loaded",b);c&&c.hasOwnProperty("success")&&c.success(a)},function(d){p(d.status,"Error loading lang file",b);c&&
c.hasOwnProperty("error")&&c.error(a)})};this.lang.Get=U;this.lang.Locale=function(a){if(void 0!==a)f=a;else return f};this.L=function(){r&&window.console.log&&window.console.log(A,arguments)};this.D=z;this.W=function(){r&&G.warning&&window.console.warn(A,arguments)};this.E=p;this.event.Subscribe=function(a,b){n[a]||(n[a]=[]);var c=X(a,b);-1==c&&(c=n[a].length);n[a][c]=b};this.event.Notify=function(a,b){if(n[a])for(var c=n[a],d=0,e=c.length;d<e;d++)c[d](b)};this.event.Remove=function(a,b){var c=X(a,
b);-1!=c&&n[a].splice(c,1)};this.net.BaseUri=R;this.net.Ajax=function(a){return $.ajax(a)};this.Screen=function(a){a.prototype=new E;x[F]=a};this.UI=function(a){x[F]=a};this.screen.WelcomeScreen=function(a){w(a);var b=new E;b.prototype=new x[a](b);b.__Id__="welcome-screen";b.__UIComponents__=[];b.__$Container__=$(document.body);b.__FileJs__=a;b.Create();b.__Awake__();b.Show();P=!0;document.location.hash&&O()};this.screen.Destroy=function(a){if(h.hasOwnProperty(a)){var b=h[a].$Get().parent().data("screen_context");
y[b]==h[a]&&delete y[b];h[a].__Destroy__();h[a].$Get().remove();delete h[a]}else iris.W('Error removing the screen "'+a+'", path not found.')};this.ui.JqToHash=aa;this.ui.HashToJq=function(a,b,c){var d=b.get(0);if(c)for(var e,f=0,g=c.length;f<g;f++)(e=a[c[f]])&&d.setAttribute(c[f],e);else for(e in a)d.setAttribute(e,a[e]);return b};this.Include=function(){for(var a=0,b=arguments.length;a<b;a++)w(arguments[a])};this.util.DateFormat=ba;this.util.Deserialize=function(a,b){var c,d,e;for(name in b)if(c=
a.find('[name="'+name+'"]'),0<c.length)switch(d=c[0].tagName.toLowerCase(),e=b[name],d){case "select":case "textarea":$(c).val(e);break;case "input":switch(d){case "checkbox":e&&c.attr("checked","checked");break;case "radio":c.filter('[value="'+e+'"]').attr("checked","checked");break;default:c.val(e)}}};this.util.Serialize=function(a){var b={};$.map(a.serializeArray(),function(a){b[a.name]=a.value});return b};this.Goto=function(a){t=document.location.hash;document.location.hash=a};this.AddOn=function(a){ga[F]=
a};this.ApplyAddOn=function(a,b,c){w(a);var d=new fa;d.__Components__=[];d.__Setting__={};d.prototype=new ga[a](d);d.Settings(c);d.AddAll(b);d.Create();return d};this.Regional=function(a,b){!b.hasOwnProperty("dayNames")||!b.hasOwnProperty("monthNames")||!b.hasOwnProperty("dateFormat")||!b.hasOwnProperty("currency")||!b.currency.hasOwnProperty("formatPos")||!b.currency.hasOwnProperty("formatNeg")||!b.currency.hasOwnProperty("decimal")||!b.currency.hasOwnProperty("thousand")||!b.currency.hasOwnProperty("precision")?
iris.E("Regional '"+a+"' has invalid format ",b):D[a]=b};$(window).bind("hashchange",O);"undefined"===typeof jQuery?p("jQuery 1.5+ previous load required"):1.5>$().jquery&&p("jQuery "+$().jquery+" currently loaded, jQuery 1.5+ required");r=window.console&&window.console.debug&&window.console.warn&&window.console.error;!r&&(window.console&&window.console.log)&&window.console.log("advanced console debugging is not supported in this browser")};