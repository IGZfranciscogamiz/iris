var iris=new function(){function N(){var a=D.split("/"),b=document.location.hash.split("/"),c="",d="",e,i=!1;if(a.length>b.length)for(var f=0,h=a.length;f<h;f++)if(c+=a[f]+"/",b[f]&&(d+=b[f]+"/"),i||d!=c)i=!0,e=E(c.replace(/\?[^\/]*/,"")),u[e].__Sleep__(),u[e].Hide();d=c="";i=!1;f=0;for(h=b.length;f<h;f++)if(d+=b[f]+"/",a[f]&&(c+=a[f]+"/"),i||d!=c){var i=!0,j=e=E(d.replace(/\?[^\/]*/,"")),g=b[f];e={};for(var k=/(\w*)=(\w*)/g;matches=k.exec(g);)e[matches[1]]=matches[2];if(F.hasOwnProperty(j)){if(!u.hasOwnProperty(j)){g=
j;k=O[g];G(k);var l=new H;l.prototype=new z[k](l);l.__Id__=g;l.__UIComponents__=[];l.__$Container__=F[g];l.Create();l.Hide();u[g]=l}j=u[j];g=j.$Get().parent().attr("data-id");I.hasOwnProperty(g)&&(k=I[g],k.__Sleep__(),k.Hide());j.__Awake__(e?e:{});j.Show();I[g]=j}else r("[iris.screen.Goto] iris.screen.Add() has to be previosly called",j)}D=E(d)}function E(a){return a.replace(/\/$/,"")}function P(a){D=document.location.hash;document.location.hash=a}function G(a){if(!q.hasOwnProperty(a)){q[a]=!0;var b=
0===a.indexOf("http")?a:Q()+a;v("[iris.ui.Include]",b);if(-1<a.lastIndexOf(".css")){var c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;R.appendChild(c)}else{J=a;var d=-1<a.lastIndexOf(".html");S(b,d?"html":"text",function(b){if(d){var c=q,f=b.match(/@@[A-Z_\.]+@@/g);if(f){var h,j=f.length;for(h=0;h<j;h++)b=b.replace(f[h],T(f[h].substring(2,f[h].length-2)))}c[a]=b}else c=document.createElement("script"),c.language="javascript",c.type="text/javascript",c.text=b,R.appendChild(c)},
function(a){delete q[b];r(a.status,"Error loading file",b)})}}}function v(){s&&A.debug&&window.console.debug(w,arguments)}function r(){s&&A.error&&window.console.error(w,arguments)}function B(a){if(void 0!==a)o=a;else{if(!o){o=m["environment-default"];for(var b in m.environment)if(-1<document.location.href.indexOf(b)){o=m.environment[b];break}o||(o="pro");w="["+o+"]"}return o}}function S(a,b,c,d){$.ajax({url:a,dataType:b,async:!1,cache:K,success:c,error:d})}function U(a){$.extend(x,a);return x}function V(a){$.extend(y,
a);return y}function W(a,b){var c=p[a];if(c)for(var d=0,e=c.length;d<e;d++)if(c[d]===b)return d;return-1}function Q(a){void 0!==a?L=a:(a=document.getElementsByTagName("base"),a=0<a.length?a[0].attributes.href.value:"/",L=document.location.protocol+"//"+document.location.host+a);return L}function X(a,b){v("[iris.lang.Load]",a,b);null===n&&(n=a);C.hasOwnProperty(n)||(C[n]={});$.extend(C[n],b)}function T(a,b){var c=C[b?b:n][a];c||(c="??"+a+"??");return c}function Y(a){for(var b={},a=a.get(0).attributes,
c,d=0,e=a.length;d<e;d++)c=a[d].name,0==c.indexOf("data-")&&(c=c.substr(5)),b[c]=a[d].value;return b}function Z(a,b){b||(b=M[n].dateFormat);"object"!==typeof a&&(a=new Date(Number(a)));for(var c="",d=0,e=b.length;d<e;d++)c+=ca(b[d],a);return c}function t(a){return 10>a?"0"+a:a}function ca(a,b){var c=M[n];switch(a){case "y":return String(b.getFullYear()).substring(2);case "Y":return b.getFullYear();case "m":return c=b.getMonth()+1,t(c);case "n":return b.getMonth()+1;case "M":return c[monthNames][b.getMonth()].substring(0,
3);case "b":return c[monthNames][b.getMonth()].substring(0,3).toLowerCase();case "F":return c[monthNames][b.getMonth()];case "d":return c=b.getDate(),t(c);case "D":return c[dayNames][b.getDay()].substring(0,3);case "l":return c[dayNames][b.getDay()];case "s":return c=b.getSeconds(),t(c);case "i":return c=b.getMinutes(),t(c);case "H":return c=b.getHours(),t(c);case "h":return c=b.getHours(),t(0==c%12?12:c%12);case "a":return 12<b.getHours()?"p.m.":"a.m.";case "A":return 12<b.getHours()?"PM":"AM";case "U":return Math.floor(0.001*
b.getTime());default:return a}}function aa(){this.__TemplateMode__=this.TEMPLATE_REPLACE;this.TemplateMode=function(a){this.__TemplateMode__=a};this.Template=function(a,b){this.__Template__(a,b,this.__TemplateMode__)}}function H(){this.Template=function(a,b){this.__Template__(a,b,this.TEMPLATE_APPEND)}}function ba(){this.TEMPLATE_APPEND="append";this.TEMPLATE_REPLACE="replace";this.__Setting__=this.__$Container__=this.__UIComponents__=this.__Id__=this.__$Tmpl__=null;this.__Sleep__=function(){for(var a=
this.__UIComponents__,b=0,c=a.length;b<c;b++)a[b].Sleep();this.Sleep()};this.__Awake__=function(a){for(var b=this.__UIComponents__,c=0,d=b.length;c<d;c++)b[c].Awake();this.Awake(a)};this.__Template__=function(a,b,c){if("undefined"==typeof a)return this.__$Tmpl__=this.__$Container__;iris.Include(a);if(b){for(var d=q[a],e=d,i,f,h,j=/##([0-9A-Za-z_\.]+)(?:\|(date|currency)(?:\(([^\)]+)\))*)?##/g;i=j.exec(d);){h=b[i[1]];if(f=i[2])switch(f){case "date":h=Z(h,i[3]);break;case "currency":f=M[n].currency;
var g=Number(h);h=0<=g?f.formatPos:f.formatNeg;for(var k=g%1,g=String(Math.abs(g-k)),k=String(Math.abs(k).toFixed(f.precision)),k=k.substr(2),l=0;l<Math.floor((g.length-(1+l))/3);l++)g=g.substring(0,g.length-(4*l+3))+f.thousand+g.substring(g.length-(4*l+3));h=h.replace("n",g+f.decimal+k);break;default:iris.W("Unknow template format label",f)}e=e.replace(i[0],h)}b=e}else b=q[a];this.__$Tmpl__=b=$(b);1<b.size()&&iris.E("Template must have only one root node",a,q[a],b);switch(c){case this.TEMPLATE_APPEND:this.__$Container__.append(b);
break;case this.TEMPLATE_REPLACE:this.__$Container__.replaceWith(b);break;case this.TEMPLATE_BEFORE:this.__$Container__.before(b);break;case this.TEMPLATE_AFTER:this.__$Container__.after(b);break;default:iris.E("Unknown template mode",c)}};this.Show=function(){this.__$Tmpl__.show()};this.Hide=function(){this.__$Tmpl__.hide()};this.Settings=function(a){$.extend(this.__Setting__,a)};this.Setting=function(a,b){if(void 0===b)return this.__Setting__.hasOwnProperty(a)||iris.W("The setting ",a," is not in ",
this.__Setting__,this),this.__Setting__[a];this.__Setting__[a]=b};this.$Get=function(a,b){var c=void 0===b?this.__$Tmpl__:b;if(a){var d="[data-id="+a+"]",e=c.filter(d);return 0<e.length?e:c.find(d)}return c};this.InstanceUI=function(a,b,c,d){d="string"===typeof a?this.$Get(a,d):a;if(1==d.size()){a=d.attr("data-id");G(b);var e=new aa;e.__Id__=a;e.__$Container__=d;e.__UIComponents__=[];e.__Setting__={};e.prototype=new z[b](e);c=void 0===c?{}:c;b=Y(d);$.extend(e.__Setting__,b,c);e.Create(b,c);this.__UIComponents__.push(e);
return e}1<d.size()?iris.E("InstanceUI: Container [data-id="+a+"] must be unique"):iris.E("InstanceUI: Container [data-id="+a+"] not found")};this.$Container=function(){return this.__$Container__};this.Create=function(){};this.Awake=function(){};this.Sleep=function(){}}var o=null,A={error:!0},w="",u={},O={},F={},I={},D="",x={},y={},n=null,m={},C={},p={},q={},z={},L="",J,R=$("head").get(0),K=!0,s,M={"en-US":{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"January February March April May June July August September October November December".split(" "),
dateFormat:"m/d/Y h:i:s",currency:{formatPos:"$ n",formatNeg:"($ n)",decimal:".",thousand:",",precision:2}},"es-ES":{dayNames:"Domingo Lunes Martes Mi\u00e9rcoles Jueves Viernes S\u00e1bado".split(" "),monthNames:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),dateFormat:"d/m/Y H:i:s",currency:{formatPos:"n \u20ac",formatNeg:"-n \u20ac",decimal:",",thousand:".",precision:2}}};aa.prototype=new ba;H.prototype=new ba;this.screen={};this.event={};
this.config={};this.ui={};this.net={};this.global={};this.local={};this.lang={};this.util={};this.config.Load=function(a){if(a){$.extend(m,a);U(m.global);a=B();if(m.log){var b=m.log[a].split(","),c;for(c in b)A[$.trim(b[c])]=!0}K=!0;if(m.hasOwnProperty("environments-nocache")){c=m["environments-nocache"].split(",");for(var b=0,d=c.length;b<d;b++)if(c[b]==a){K=!1;break}}V(m.local)}return m};this.config.Env=B;this.global.Load=U;this.global.Data=function(a,b){if(a&&void 0!==b)x[a]=b;else return a?x[a]:
x};this.local.Load=V;this.local.Data=function(a,b){if(a&&void 0!==b)y[a][B()]=b;else return a?y[a][B()]:y};this.lang.Load=X;this.lang.LoadFrom=function(a,b,c){v("[iris.lang.LoadFrom]",a,b);S(b,"json",function(b){X(a,b);v("[iris.lang.LoadFrom] loaded",b);c&&c.hasOwnProperty("success")&&c.success(a)},function(d){r(d.status,"Error loading lang file",b);c&&c.hasOwnProperty("error")&&c.error(a)})};this.lang.Get=T;this.lang.Locale=function(a){if(void 0!==a)n=a;else return n};this.L=function(){s&&window.console.log&&
window.console.log(w,arguments)};this.D=v;this.W=function(){s&&A.warning&&window.console.warn(w,arguments)};this.E=r;this.event.Subscribe=function(a,b){p[a]||(p[a]=[]);var c=W(a,b);-1==c&&(c=p[a].length);p[a][c]=b};this.event.Notify=function(a,b){if(p[a])for(var c=p[a],d=0,e=c.length;d<e;d++)c[d](b)};this.event.Remove=function(a,b){var c=W(a,b);-1!=c&&p[a].splice(c,1)};this.net.BaseUri=Q;this.net.Ajax=function(a){return $.ajax(a)};this.Screen=function(a){a.prototype=new H;z[J]=a};this.UI=function(a){z[J]=
a};this.screen.Add=function(a,b,c){a.get(0)===document.body&&a.attr("data-id","document_body");O[b]=c;F[b]=a};this.ui.JqToHash=Y;this.ui.HashToJq=function(a,b,c){var d=b.get(0);if(c)for(var e,i=0,f=c.length;i<f;i++)(e=a[c[i]])&&d.setAttribute(c[i],e);else for(e in a)d.setAttribute(e,a[e]);return b};this.Include=function(){for(var a=0,b=arguments.length;a<b;a++)G(arguments[a])};this.util.DateFormat=Z;this.util.Deserialize=function(a,b){var c,d,e;for(name in b)if(c=a.find('[name="'+name+'"]'),0<c.length)switch(d=
c[0].tagName.toLowerCase(),e=b[name],d){case "select":case "textarea":$(c).val(e);break;case "input":switch(d){case "checkbox":e&&c.attr("checked","checked");break;case "radio":c.filter('[value="'+e+'"]').attr("checked","checked");break;default:c.val(e)}}};this.util.Serialize=function(a){var b={};$.map(a.serializeArray(),function(a){b[a.name]=a.value});return b};this.Goto=P;this.GotoUrlHash=function(a){document.location.hash?N():P(a)};$(window).bind("hashchange",N);"undefined"===typeof jQuery?r("jQuery 1.5+ previous load required"):
1.5>$().jquery&&r("jQuery "+$().jquery+" currently loaded, jQuery 1.5+ required");s=window.console&&window.console.debug&&window.console.warn&&window.console.error;!s&&(window.console&&window.console.log)&&window.console.log("advanced console debugging is not supported in this browser")};