var iris=new function(){function N(){if(F)return F=!1;var a=t.split("/"),b=document.location.hash.split("/"),c="",d="",e,j=!1;if(""!=t)for(var f=0,h=a.length;f<h;f++)if(""!=a[f]&&(c+=a[f]+"/",e=G(c),i.hasOwnProperty(e)&&!1===i[e].CanSleep()))return F=!0,document.location.hash=t,!1;c="";if(a.length>b.length){f=0;for(h=a.length;f<h;f++)if(c+=a[f]+"/",b[f]&&(d+=b[f]+"/"),j||d!=c)j=!0,e=G(c),i[e].__Sleep__(),i[e].Hide()}d=c="";j=!1;f=0;for(h=b.length;f<h;f++)if(d+=b[f]+"/",a[f]&&(c+=a[f]+"/"),j||d!=c){j=
!0;e=G(d);for(var g=b[f],k={},m=/(\w*)=([\w%]*)/g;matches=m.exec(g);)k[matches[1]]=decodeURI(matches[2]);O(e,k)}t=d.replace(/\/$/,"")}function G(a){return a.replace(/\?[^\/]*/,"").replace(/\/$/,"")}function O(a,b){if(z.hasOwnProperty(a)){i.hasOwnProperty(a)||P(a);var c=i[a],d=c.$Get().parent().attr("data-id");if(u.hasOwnProperty(d)){var e=u[d];e.__Sleep__();e.Hide()}c.__Awake__(b?b:{});c.Show();u[d]=c}else p("[iris.screen.Goto] self.AddScreen() has to be previosly called",a)}function Q(a){t=document.location.hash;
document.location.hash=a}function A(a){if(!o.hasOwnProperty(a)){o[a]=!0;var b=0===a.indexOf("http")?a:R()+a;v("[iris.ui.Include]",b);if(-1<a.lastIndexOf(".css")){var c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=b;S.appendChild(c)}else{B=a;var d=-1<a.lastIndexOf(".html");T(b,d?"html":"text",function(b){if(d){var c=o,f=b.match(/@@[A-Z_\.]+@@/g);if(f){var h,i=f.length;for(h=0;h<i;h++)b=b.replace(f[h],U(f[h].substring(2,f[h].length-2)))}c[a]=b}else c=document.createElement("script"),
c.language="javascript",c.type="text/javascript",c.text=b,S.appendChild(c)},function(a){delete o[b];p(a.status,"Error loading file",b)})}}}function v(){q&&C.debug&&window.console.debug(w,arguments)}function p(){q&&C.error&&window.console.error(w,arguments)}function D(a){if(void 0!==a)l=a;else{if(!l){l=g["environment-default"];for(var b in g.environment)if(-1<document.location.href.indexOf(b)){l=g.environment[b];break}l||(l="pro");w="["+l+"]"}return l}}function T(a,b,c,d){$.ajax({url:a,dataType:b,
async:!1,cache:H,success:c,error:d})}function V(a){$.extend(x,a);return x}function W(a){$.extend(y,a);return y}function X(a,b){var c=n[a];if(c)for(var d=0,e=c.length;d<e;d++)if(c[d]===b)return d;return-1}function R(a){void 0!==a?I=a:(a=document.getElementsByTagName("base"),a=0<a.length?a[0].attributes.href.value:"/",I=document.location.protocol+"//"+document.location.host+a);return I}function Y(a,b){v("[iris.lang.Load]",a,b);null===m&&(m=a);r.hasOwnProperty(m)||(r[m]={});$.extend(r[m],b)}function U(a,
b){var c=b?b:m,d=null;if(-1<a.indexOf(".")){for(var d=a.split("."),e=d.length,j=r[c],c=0;c<e;c++)j=j[d[c]];d=j}else r.hasOwnProperty(c)&&(d=r[c][a]);d||(d="??"+a+"??");return d}function Z(a){for(var b={},a=a.get(0).attributes,c,d=0,e=a.length;d<e;d++)c=a[d].name,0==c.indexOf("data-")&&(c=c.substr(5)),b[c]=a[d].value;return b}function P(a){var b=J[a];A(b);var c=new K;c.prototype=new E[b](c);c.__Id__=a;c.__UIComponents__=[];c.__$Container__=z[a];c.Create();c.Hide();i[a]=c}function aa(a,b){b||(b=L[m].dateFormat);
"object"!==typeof a&&(a=new Date(Number(a)));for(var c="",d=0,e=b.length;d<e;d++)c+=fa(b[d],a);return c}function s(a){return 10>a?"0"+a:a}function fa(a,b){var c=L[m];switch(a){case "y":return String(b.getFullYear()).substring(2);case "Y":return b.getFullYear();case "m":return c=b.getMonth()+1,s(c);case "n":return b.getMonth()+1;case "M":return c[monthNames][b.getMonth()].substring(0,3);case "b":return c[monthNames][b.getMonth()].substring(0,3).toLowerCase();case "F":return c[monthNames][b.getMonth()];
case "d":return c=b.getDate(),s(c);case "D":return c[dayNames][b.getDay()].substring(0,3);case "l":return c[dayNames][b.getDay()];case "s":return c=b.getSeconds(),s(c);case "i":return c=b.getMinutes(),s(c);case "H":return c=b.getHours(),s(c);case "h":return c=b.getHours(),s(0==c%12?12:c%12);case "a":return 12<b.getHours()?"p.m.":"a.m.";case "A":return 12<b.getHours()?"PM":"AM";case "U":return Math.floor(0.001*b.getTime());default:return a}}function ba(){this.__Setting__=null;this.Settings=function(a){$.extend(this.__Setting__,
a)};this.Setting=function(a,b){if(void 0===b)return this.__Setting__.hasOwnProperty(a)||iris.W("The setting ",a," is not in ",this.__Setting__,this),this.__Setting__[a];this.__Setting__[a]=b}}function M(){this.TEMPLATE_APPEND="append";this.TEMPLATE_REPLACE="replace";this.__IsSleeping__=this.__$Container__=this.__UIComponents__=this.__Id__=this.__$Tmpl__=null;this.__Sleep__=function(){for(var a=0,b=this.__UIComponents__.length;a<b;a++)this.__UIComponents__[a].__Sleep__();this.__IsSleeping__=!0;this.Sleep()};
this.__Awake__=function(a){for(var b=0,c=this.__UIComponents__.length;b<c;b++)this.__UIComponents__[b].__Awake__();this.__IsSleeping__=!1;this.Awake(a)};this.__Destroy__=function(){this.__IsSleeping__||this.__Sleep__();for(var a=0,b=this.__UIComponents__.length;a<b;a++)this.__UIComponents__[a].__Destroy__();this.__UIComponents__=null;this.Destroy()};this.__Template__=function(a,b,c){if("undefined"==typeof a)return this.__$Tmpl__=this.__$Container__;iris.Include(a);if(b){for(var d=o[a],e=d,j,f,h,i=
/##([0-9A-Za-z_\.]+)(?:\|(date|currency)(?:\(([^\)]+)\))*)?##/g;j=i.exec(d);){h=b[j[1]];if(f=j[2])switch(f){case "date":h=aa(h,j[3]);break;case "currency":f=L[m].currency;var k=Number(h);h=0<=k?f.formatPos:f.formatNeg;for(var g=k%1,k=String(Math.abs(k-g)),g=String(Math.abs(g).toFixed(f.precision)),g=g.substr(2),l=0;l<Math.floor((k.length-(1+l))/3);l++)k=k.substring(0,k.length-(4*l+3))+f.thousand+k.substring(k.length-(4*l+3));h=h.replace("n",k+f.decimal+g);break;default:iris.W("Unknow template format label",
f)}e=e.replace(j[0],h)}b=e}else b=o[a];this.__$Tmpl__=b=$(b);1<b.size()&&iris.E("Template must have only one root node",a,o[a],b);switch(c){case this.TEMPLATE_APPEND:this.__$Container__.append(b);break;case this.TEMPLATE_REPLACE:this.__$Container__.replaceWith(b);break;default:iris.E("Unknown template mode",c)}};this.Show=function(){this.__$Tmpl__.show()};this.Hide=function(){this.__$Tmpl__.hide()};this.$Get=function(a){if(a){var b="[data-id="+a+"]",c=this.__$Tmpl__.filter(b);if(0<c.length)return c;
b=this.__$Tmpl__.find(b);if(0<b.size())return b;iris.E("[$Get] Element not found",a,this.__$Tmpl__)}else return this.__$Tmpl__};this.InstanceUI=function(a,b,c){var d=this.$Get(a);if(1==d.size()){a=d.attr("data-id");A(b);var e=new ca;e.__Id__=a;e.__$Container__=d;e.__UIComponents__=[];e.__Setting__={};e.prototype=new E[b](e);c=void 0===c?{}:c;b=Z(d);$.extend(e.__Setting__,b,c);e.Create(b,c);return this.__UIComponents__[this.__UIComponents__.length]=e}1<d.size()?iris.E("InstanceUI: Container [data-id="+
a+"] must be unique"):iris.E("InstanceUI: Container [data-id="+a+"] not found")};this.DestroyUI=function(a){for(var b=0,c=this.__UIComponents__.length;b<c;b++)if(this.__UIComponents__[b]==a){this.__UIComponents__.splice(b,1);a.__Destroy__();a.$Get().remove();break}};this.DestroyAllUIs=function(a){for(var a="string"===typeof a?"[data-id="+a+"]":a.selector,b,c=0,d=this.__UIComponents__.length;c<d;c++)b=this.__UIComponents__[c],b.__$Container__.selector==a&&(this.__UIComponents__.splice(c--,1),d--,b.__Destroy__(),
b.$Get().remove())};this.$Container=function(){return this.__$Container__};this.Create=function(){};this.Awake=function(){};this.CanSleep=function(){return!0};this.Sleep=function(){};this.Destroy=function(){}}function da(){this.__Components__=null;this.AddAll=function(a){for(var b=0,c=a.length;b<c;b++)this.Add(a[b])};this.Add=function(a){this.hasOwnProperty("UIAddOn")&&(a.proptotype=new this.UIAddOn(a));this.__Components__[this.__Components__.length]=a};this.Remove=function(a){for(var b,c=0,d=this.__Components__.length;c<
d;c++)b=this.__Components__[c],b===a&&this.__Components__.splice(c,1)};this.Get=function(a){return this.__Components__[a]};this.Size=function(){return this.__Components__.length};this.Create=function(){}}function ca(){this.__TemplateMode__=this.TEMPLATE_REPLACE;this.TemplateMode=function(a){this.__TemplateMode__=a};this.Template=function(a,b){this.__Template__(a,b,this.__TemplateMode__)}}function K(){this.Template=function(a,b){this.__Template__(a,b,this.TEMPLATE_APPEND)};this.AddScreen=function(a,
b,c){J[b]=c;z[b]=this.$Get(a)}}var l=null,C={error:!0},w="",i={},J={},z={},u={},t="",x={},y={},m=null,g={},r={},n={},o={},E={},ea={},I="",B,S=$("head").get(0),H=!0,q,F=!1,L={"en-US":{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"January February March April May June July August September October November December".split(" "),dateFormat:"m/d/Y h:i:s",currency:{formatPos:"$ n",formatNeg:"($ n)",decimal:".",thousand:",",precision:2}},"es-ES":{dayNames:"Domingo Lunes Martes Mi\u00e9rcoles Jueves Viernes S\u00e1bado".split(" "),
monthNames:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),dateFormat:"d/m/Y H:i:s",currency:{formatPos:"n \u20ac",formatNeg:"-n \u20ac",decimal:",",thousand:".",precision:2}}};M.prototype=new ba;da.prototype=new ba;ca.prototype=new M;K.prototype=new M;this.screen={};this.event={};this.config={};this.ui={};this.net={};this.global={};this.local={};this.lang={};this.util={};this.config.Load=function(a){if(a){$.extend(g,a);V(g.global);a=D();if(g.log){var b=
g.log[a].split(","),c;for(c in b)C[$.trim(b[c])]=!0}H=!0;if(g.hasOwnProperty("environments-nocache")){c=g["environments-nocache"].split(",");for(var b=0,d=c.length;b<d;b++)if(c[b]==a){H=!1;break}}W(g.local)}return g};this.config.Env=D;this.global.Load=V;this.global.Data=function(a,b){if(a&&void 0!==b)x[a]=b;else return a?x[a]:x};this.local.Load=W;this.local.Data=function(a,b){if(a&&void 0!==b)y[a][D()]=b;else return a?y[a][D()]:y};this.lang.Load=Y;this.lang.LoadFrom=function(a,b,c){v("[iris.lang.LoadFrom]",
a,b);T(b,"json",function(b){Y(a,b);v("[iris.lang.LoadFrom] loaded",b);c&&c.hasOwnProperty("success")&&c.success(a)},function(d){p(d.status,"Error loading lang file",b);c&&c.hasOwnProperty("error")&&c.error(a)})};this.lang.Get=U;this.lang.Locale=function(a){if(void 0!==a)m=a;else return m};this.L=function(){q&&window.console.log&&window.console.log(w,arguments)};this.D=v;this.W=function(){q&&C.warning&&window.console.warn(w,arguments)};this.E=p;this.event.Subscribe=function(a,b){n[a]||(n[a]=[]);var c=
X(a,b);-1==c&&(c=n[a].length);n[a][c]=b};this.event.Notify=function(a,b){if(n[a])for(var c=n[a],d=0,e=c.length;d<e;d++)c[d](b)};this.event.Remove=function(a,b){var c=X(a,b);-1!=c&&n[a].splice(c,1)};this.net.BaseUri=R;this.net.Ajax=function(a){return $.ajax(a)};this.Screen=function(a){a.prototype=new K;E[B]=a};this.UI=function(a){E[B]=a};this.screen.WelcomeScreen=function(a){var b=$(document.body);b.attr("data-id","document_body");J["#"]=a;z["#"]=b;P("#");O("#");document.location.hash&&N()};this.screen.Destroy=
function(a){if(i.hasOwnProperty(a)){var b=i[a].$Get().parent().attr("data-id");u[b]==i[a]&&delete u[b];i[a].__Destroy__();i[a].$Get().remove();delete i[a]}else iris.W('Error removing the screen "'+a+'", path not found.')};this.ui.JqToHash=Z;this.ui.HashToJq=function(a,b,c){var d=b.get(0);if(c)for(var e,g=0,f=c.length;g<f;g++)(e=a[c[g]])&&d.setAttribute(c[g],e);else for(e in a)d.setAttribute(e,a[e]);return b};this.Include=function(){for(var a=0,b=arguments.length;a<b;a++)A(arguments[a])};this.util.DateFormat=
aa;this.util.Deserialize=function(a,b){var c,d,e;for(name in b)if(c=a.find('[name="'+name+'"]'),0<c.length)switch(d=c[0].tagName.toLowerCase(),e=b[name],d){case "select":case "textarea":$(c).val(e);break;case "input":switch(d){case "checkbox":e&&c.attr("checked","checked");break;case "radio":c.filter('[value="'+e+'"]').attr("checked","checked");break;default:c.val(e)}}};this.util.Serialize=function(a){var b={};$.map(a.serializeArray(),function(a){b[a.name]=a.value});return b};this.Goto=Q;this.GotoIfNoHash=
function(a){document.location.hash||Q(a)};this.AddOn=function(a){ea[B]=a};this.ApplyAddOn=function(a,b,c){A(a);var d=new da;d.__Components__=[];d.__Setting__={};d.prototype=new ea[a](d);d.Settings(c);d.AddAll(b);d.Create();return d};$(window).bind("hashchange",N);"undefined"===typeof jQuery?p("jQuery 1.5+ previous load required"):1.5>$().jquery&&p("jQuery "+$().jquery+" currently loaded, jQuery 1.5+ required");q=window.console&&window.console.debug&&window.console.warn&&window.console.error;!q&&(window.console&&
window.console.log)&&window.console.log("advanced console debugging is not supported in this browser")};